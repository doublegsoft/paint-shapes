{
  "version": 3,
  "sources": ["../src/common/Point.ts", "../src/common/Color.ts", "../src/shape/Shape.ts", "../src/shape/Rectangle.ts", "../src/shape/Square.ts", "../src/shape/Circle.ts", "../src/shape/Diamond.ts", "../src/shape/Connection.ts", "../src/renderer/ShapeRenderer.ts", "../src/renderer/CircleRenderer.ts", "../src/renderer/SquareRenderer.ts", "../src/renderer/DiamondRenderer.ts", "../src/renderer/RectangleRenderer.ts", "../src/paint/FlatPlayground.ts"],
  "sourcesContent": ["/*\n** \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\n** \u2588\u2584\u2500\u2584\u2584\u2500\u2588\u2588\u2580\u2584\u2500\u2588\u2588\u2584\u2500\u2584\u2588\u2584\u2500\u2580\u2588\u2584\u2500\u2584\u2588\u2500\u2584\u2500\u2584\u2500\u2588\u2580\u2580\u2580\u2580\u2580\u2588\u2588\u2500\u2584\u2584\u2584\u2584\u2588\u2500\u2588\u2500\u2588\u2588\u2580\u2584\u2500\u2588\u2588\u2584\u2500\u2584\u2584\u2500\u2588\u2584\u2500\u2584\u2584\u2500\u2588\u2500\u2584\u2584\u2584\u2584\u2588\n** \u2588\u2588\u2500\u2584\u2584\u2584\u2588\u2588\u2500\u2580\u2500\u2588\u2588\u2588\u2500\u2588\u2588\u2588\u2500\u2588\u2584\u2580\u2500\u2588\u2588\u2588\u2588\u2500\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584\u2584\u2584\u2584\u2500\u2588\u2500\u2584\u2500\u2588\u2588\u2500\u2580\u2500\u2588\u2588\u2588\u2500\u2584\u2584\u2584\u2588\u2588\u2500\u2584\u2588\u2580\u2588\u2584\u2584\u2584\u2584\u2500\u2588\n** \u2580\u2584\u2584\u2584\u2580\u2580\u2580\u2584\u2584\u2580\u2584\u2584\u2580\u2584\u2584\u2584\u2580\u2584\u2584\u2584\u2580\u2580\u2584\u2584\u2580\u2580\u2584\u2584\u2584\u2580\u2580\u2580\u2580\u2580\u2580\u2580\u2580\u2580\u2584\u2584\u2584\u2584\u2584\u2580\u2584\u2580\u2584\u2580\u2584\u2584\u2580\u2584\u2584\u2580\u2584\u2584\u2584\u2580\u2580\u2580\u2584\u2584\u2584\u2584\u2584\u2580\u2584\u2584\u2584\u2584\u2584\u2580\n*/\n\n/**\n * A plain\u2011old JavaScript object that represents a point in 2-D or 3\u2011D space.\n *\n * @example\n *   const p = new Point(1.0, 2.0, 3.0);\n *   console.log(p.distanceTo(new Point(4, 6, 8))); // 7.3484692283495345\n */\nexport class Point {\n  /** X coordinate */\n  public x: number;\n\n  /** Y coordinate */\n  public y: number;\n\n  /** Z coordinate */\n  public z?: number = 0;\n\n  /**\n   * Constructs a new Point.\n   * @param x - The X coordinate.\n   * @param y - The Y coordinate.\n   * @param z - The Z coordinate.\n   */\n  constructor(x: number, y: number, z?: number) {\n    this.x = x;\n    this.y = y;\n    if (typeof z !== 'undefined') {\n      this.z = z;\n    } else {\n      this.z = 0;\n    }\n  }\n\n  public toString(): string {\n    if (typeof this.z === 'undefined') {\n      return `Point(${this.x}, ${this.y})`;\n    } else { \n      return `Point(${this.x}, ${this.y}, ${this.z})`;\n    }\n  }\n\n\n  /**\n   * Euclidean distance to another point.\n   * @param other - The other point.\n   * @returns The distance.\n   */\n  public distanceTo(other: Point): number {\n    const dx = this.x - other.x;\n    const dy = this.y - other.y;\n    if (typeof this.z === 'undefined') {\n      return Math.sqrt(dx * dx + dy * dy);\n    } else {\n      const dz = this.z - other.z!;\n      return Math.sqrt(dx * dx + dy * dy + dz * dz);\n    }\n  }\n\n  public equals(other: Point): boolean {\n    return this.x === other.x && this.y === other.y;\n  }\n\n}", "/*\n** \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\n** \u2588\u2584\u2500\u2584\u2584\u2500\u2588\u2588\u2580\u2584\u2500\u2588\u2588\u2584\u2500\u2584\u2588\u2584\u2500\u2580\u2588\u2584\u2500\u2584\u2588\u2500\u2584\u2500\u2584\u2500\u2588\u2580\u2580\u2580\u2580\u2580\u2588\u2588\u2500\u2584\u2584\u2584\u2584\u2588\u2500\u2588\u2500\u2588\u2588\u2580\u2584\u2500\u2588\u2588\u2584\u2500\u2584\u2584\u2500\u2588\u2584\u2500\u2584\u2584\u2500\u2588\u2500\u2584\u2584\u2584\u2584\u2588\n** \u2588\u2588\u2500\u2584\u2584\u2584\u2588\u2588\u2500\u2580\u2500\u2588\u2588\u2588\u2500\u2588\u2588\u2588\u2500\u2588\u2584\u2580\u2500\u2588\u2588\u2588\u2588\u2500\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584\u2584\u2584\u2584\u2500\u2588\u2500\u2584\u2500\u2588\u2588\u2500\u2580\u2500\u2588\u2588\u2588\u2500\u2584\u2584\u2584\u2588\u2588\u2500\u2584\u2588\u2580\u2588\u2584\u2584\u2584\u2584\u2500\u2588\n** \u2580\u2584\u2584\u2584\u2580\u2580\u2580\u2584\u2584\u2580\u2584\u2584\u2580\u2584\u2584\u2584\u2580\u2584\u2584\u2584\u2580\u2580\u2584\u2584\u2580\u2580\u2584\u2584\u2584\u2580\u2580\u2580\u2580\u2580\u2580\u2580\u2580\u2580\u2584\u2584\u2584\u2584\u2584\u2580\u2584\u2580\u2584\u2580\u2584\u2584\u2580\u2584\u2584\u2580\u2584\u2584\u2584\u2580\u2580\u2580\u2584\u2584\u2584\u2584\u2584\u2580\u2584\u2584\u2584\u2584\u2584\u2580\n*/\n\nexport class Color {\n\n  public static readonly transparent: Color = new Color(255,255,255, 1);\n\n  public static readonly white = new Color(255, 255, 255);\n\n  public static readonly black = new Color(0, 0, 0);\n\n  private _red: number = 0;\n\n  private _green: number = 0;\n\n  private _blue: number = 0;\n\n  private _alpha: number = 0;\n\n  constructor(red: number, green: number, blue: number, alpha?: number) {\n    this._red = red;\n    this._green = green;\n    this._blue = blue;\n    this._alpha = alpha || 0;\n  }\n\n  set red(value: number) {\n    this._red = value;\n  }\n\n  set green(value: number) {\n    this._green = value;\n  }\n\n  set blue(value: number) {\n    this._blue = value;\n  }\n\n  set alpha(value: number) {\n    this._alpha = value;\n  }\n\n  get hex() {\n    const r = Math.max(0, Math.min(255, this._red));\n    const g = Math.max(0, Math.min(255, this._green));\n    const b = Math.max(0, Math.min(255, this._blue));\n\n    return (\"#\" +\n      ((1 << 24) + (r << 16) + (g << 8) + b)\n        .toString(16)\n        .slice(1)\n    );\n  }\n}", "/*\n** \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\n** \u2588\u2584\u2500\u2584\u2584\u2500\u2588\u2588\u2580\u2584\u2500\u2588\u2588\u2584\u2500\u2584\u2588\u2584\u2500\u2580\u2588\u2584\u2500\u2584\u2588\u2500\u2584\u2500\u2584\u2500\u2588\u2580\u2580\u2580\u2580\u2580\u2588\u2588\u2500\u2584\u2584\u2584\u2584\u2588\u2500\u2588\u2500\u2588\u2588\u2580\u2584\u2500\u2588\u2588\u2584\u2500\u2584\u2584\u2500\u2588\u2584\u2500\u2584\u2584\u2500\u2588\u2500\u2584\u2584\u2584\u2584\u2588\n** \u2588\u2588\u2500\u2584\u2584\u2584\u2588\u2588\u2500\u2580\u2500\u2588\u2588\u2588\u2500\u2588\u2588\u2588\u2500\u2588\u2584\u2580\u2500\u2588\u2588\u2588\u2588\u2500\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584\u2584\u2584\u2584\u2500\u2588\u2500\u2584\u2500\u2588\u2588\u2500\u2580\u2500\u2588\u2588\u2588\u2500\u2584\u2584\u2584\u2588\u2588\u2500\u2584\u2588\u2580\u2588\u2584\u2584\u2584\u2584\u2500\u2588\n** \u2580\u2584\u2584\u2584\u2580\u2580\u2580\u2584\u2584\u2580\u2584\u2584\u2580\u2584\u2584\u2584\u2580\u2584\u2584\u2584\u2580\u2580\u2584\u2584\u2580\u2580\u2584\u2584\u2584\u2580\u2580\u2580\u2580\u2580\u2580\u2580\u2580\u2580\u2584\u2584\u2584\u2584\u2584\u2580\u2584\u2580\u2584\u2580\u2584\u2584\u2580\u2584\u2584\u2580\u2584\u2584\u2584\u2580\u2580\u2580\u2584\u2584\u2584\u2584\u2584\u2580\u2584\u2584\u2584\u2584\u2584\u2580\n*/\n\nimport { Point } from \"../common/Point\";\nimport {Color} from \"../common/Color\";\n\n/**\n * Common contract for all geometric shapes.\n *\n * A shape:\n *  \u2022 has a list of vertices (`points`);\n *  \u2022 can report its area and perimeter (abstract);\n *  \u2022 may be moved or rotated (concrete helpers);\n *  \u2022 can be visualised by a `draw` method that must be implemented by each subclass.\n *\n * The class is marked `abstract` so it can\u2019t be instantiated directly.\n */\nexport abstract class Shape {\n\n  private _id: string = '';\n\n  private _borderRadius: number = 0;\n\n  private _foregroundColor: Color = Color.black;\n\n  private _backgroundColor: Color = Color.transparent;\n\n  private _borderColor: Color = Color.transparent;\n\n  private _borderWidth: number = 0;\n\n  private _text: string = '';\n\n  /**\n   * Ordered list of points that define the shape\u2019s outline.\n   *\n   * The array is *immutable* (readonly) to prevent accidental mutation\n   * outside the class.  Sub\u2011classes can add helper methods that expose a\n   * mutable view if they need to.\n   */\n  protected _points: Array<Point>;\n\n  /**\n   * @param points List of vertices that define the shape.\n   *               Must contain at least two points (otherwise the shape is degenerate).\n   */\n  protected constructor(points: Point[]) {\n    if (points.length == 0) {\n      throw new Error('A shape must have at least one point.');\n    }\n    this._points = [...points]; // shallow copy for safety\n  }\n\n  set foregroundColor(value: Color) {\n    this._foregroundColor = value;\n  }\n\n  get foregroundColor() {\n    return this._foregroundColor;\n  }\n\n  set backgroundColor(value: Color) {\n    this._backgroundColor = value;\n  }\n\n  get backgroundColor() {\n    return this._backgroundColor;\n  }\n\n  set borderColor(value: Color) {\n    this._borderColor = value;\n  }\n\n  get borderColor() {\n    return this._borderColor;\n  }\n\n  set borderWidth(value: number) {\n    this._borderWidth = value;\n  }\n\n  get borderWidth() {\n    return this._borderWidth;\n  }\n\n  set borderRadius(value: number) {\n    this._borderRadius = value;\n  }\n\n  get borderRadius() {\n    return this._borderRadius;\n  }\n\n  set text(value: string) {\n    this._text = value;\n  }\n\n  get text(): string {\n    return this._text;\n  }\n\n  set id(value: string) {\n    this._id = value;\n  }\n\n  get id(): string {\n    return this._id;\n  }\n\n  /**\n   * if in 2d context, depth means draw order for shapes.\n   */\n  get depth(): number {\n    return this._points[0].z || 0;\n  }\n\n  /**\n   * Translates (moves) the shape by a vector.\n   *\n   * The concrete shape can choose to either mutate the existing points or\n   * return a new shape instance \u2013 here we mutate in place for simplicity.\n   */\n  translate(nx: number, ny: number): void {\n    const p= this._points[0];\n    const dx= p.x - nx;\n    const dy= p.y - ny;\n    for (let i= 0; i < this._points.length; i++) {\n      const p= this._points[i];\n      p.x = p.x - dx;\n      p.y = p.y - dy;\n    }\n  }\n\n  /** \n   * Rotates the shape around a pivot point by a given angle (in degrees). \n   */\n  rotate(angleDeg: number, pivot: Point = new Point(0, 0)): void {\n    const rad = (angleDeg * Math.PI) / 180;\n    const cos = Math.cos(rad);\n    const sin = Math.sin(rad);\n\n    for (let i = 0; i < this._points.length; i++) {\n      const p = this._points[i];\n      const x = p.x - pivot.x;\n      const y = p.y - pivot.y;\n      const nx = x * cos - y * sin + pivot.x;\n      const ny = x * sin + y * cos + pivot.y;\n      p.x = nx;\n      p.y = ny;\n    }\n  }\n\n  /**\n   * Gets offset relative to the top-left point according to the given point.\n   */\n  offset(point: Point): Point {\n    const topLeft = this._points[0];\n    return new Point(point.x - topLeft.x, point.y - topLeft.y);\n  }\n\n  place(point: Point): void {\n    this._points[0] = point;\n  }\n\n  /**\n   * Checks this shape contain the given point.\n   * \n   * @param point \n   *      the point\n   */\n  abstract contains(point: Point): boolean;\n\n  /**\n   * Gets the connectable points from shape including top-middle,\n   * right-middle, bottom-middle, bottom-middle points.\n   */\n  abstract getConnectablePoints(): Point[];\n\n  equals(shape: Shape) {\n    let typeOfThis: string = typeof this;\n    let typeOfShape: string = typeof shape;\n    if (typeOfThis !== typeOfShape) {\n      return false;\n    }\n    return this._id === shape.id;\n  }\n}", "/*\n** \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\n** \u2588\u2584\u2500\u2584\u2584\u2500\u2588\u2588\u2580\u2584\u2500\u2588\u2588\u2584\u2500\u2584\u2588\u2584\u2500\u2580\u2588\u2584\u2500\u2584\u2588\u2500\u2584\u2500\u2584\u2500\u2588\u2580\u2580\u2580\u2580\u2580\u2588\u2588\u2500\u2584\u2584\u2584\u2584\u2588\u2500\u2588\u2500\u2588\u2588\u2580\u2584\u2500\u2588\u2588\u2584\u2500\u2584\u2584\u2500\u2588\u2584\u2500\u2584\u2584\u2500\u2588\u2500\u2584\u2584\u2584\u2584\u2588\n** \u2588\u2588\u2500\u2584\u2584\u2584\u2588\u2588\u2500\u2580\u2500\u2588\u2588\u2588\u2500\u2588\u2588\u2588\u2500\u2588\u2584\u2580\u2500\u2588\u2588\u2588\u2588\u2500\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584\u2584\u2584\u2584\u2500\u2588\u2500\u2584\u2500\u2588\u2588\u2500\u2580\u2500\u2588\u2588\u2588\u2500\u2584\u2584\u2584\u2588\u2588\u2500\u2584\u2588\u2580\u2588\u2584\u2584\u2584\u2584\u2500\u2588\n** \u2580\u2584\u2584\u2584\u2580\u2580\u2580\u2584\u2584\u2580\u2584\u2584\u2580\u2584\u2584\u2584\u2580\u2584\u2584\u2584\u2580\u2580\u2584\u2584\u2580\u2580\u2584\u2584\u2584\u2580\u2580\u2580\u2580\u2580\u2580\u2580\u2580\u2580\u2584\u2584\u2584\u2584\u2584\u2580\u2584\u2580\u2584\u2580\u2584\u2584\u2580\u2584\u2584\u2580\u2584\u2584\u2584\u2580\u2580\u2580\u2584\u2584\u2584\u2584\u2584\u2580\u2584\u2584\u2584\u2584\u2584\u2580\n*/\n\nimport { Shape } from \"./Shape\";\nimport { Point } from \"@/common/Point\";\n\nexport class Rectangle extends Shape {\n\n  private _width: number = 0;\n\n  private _height: number = 0;\n\n  public get topLeft(): Point {\n      return this._points[0];\n  }\n\n  public get width(): number {\n    return this._width;\n  }\n\n  public set width(value: number) {\n    this._width = value;\n  }\n\n  public get height(): number {\n    return this._height;\n  }\n\n  public set height(value: number) {\n    this._height = value;\n  }\n\n  /**\n   * @param topLeft  the upper\u2011left corner of the rectangle\n   * @param width    must be > 0\n   * @param height   must be > 0\n   */\n  constructor(topLeft: Point, width: number, height: number) {\n    const pts = [\n      topLeft,\n      new Point(topLeft.x + width, topLeft.y),                // top\u2011right\n      new Point(topLeft.x + width, topLeft.y + height),       // bottom\u2011right\n      new Point(topLeft.x, topLeft.y + height),               // bottom\u2011left\n    ];\n    super(pts);\n\n    if (width <= 0 || height <= 0) {\n      throw new Error('Width and height must be greater than 0.');\n    }\n    this._width = width;\n    this._height = height;\n  }\n\n  contains(point: Point): boolean {\n    const topLeft = this._points[0];\n    return point.x >= topLeft.x && (topLeft.x + this._width) >= point.x &&\n      point.y >= topLeft.y && (topLeft.y + this._height) >= point.y;\n  }\n\n  getConnectablePoints(): Point[] {\n    const ret = new Array<Point>();\n    const topLeft = this._points[0];\n    ret.push(new Point(topLeft.x + this._width / 2, topLeft.y));\n    ret.push(new Point(topLeft.x + this._width, topLeft.y + this._height / 2));\n    ret.push(new Point(topLeft.x + this._width / 2, topLeft.y + this._height));\n    ret.push(new Point(topLeft.x, topLeft.y + this._height / 2));\n    return ret;\n  }\n}", "/*\n** \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\n** \u2588\u2584\u2500\u2584\u2584\u2500\u2588\u2588\u2580\u2584\u2500\u2588\u2588\u2584\u2500\u2584\u2588\u2584\u2500\u2580\u2588\u2584\u2500\u2584\u2588\u2500\u2584\u2500\u2584\u2500\u2588\u2580\u2580\u2580\u2580\u2580\u2588\u2588\u2500\u2584\u2584\u2584\u2584\u2588\u2500\u2588\u2500\u2588\u2588\u2580\u2584\u2500\u2588\u2588\u2584\u2500\u2584\u2584\u2500\u2588\u2584\u2500\u2584\u2584\u2500\u2588\u2500\u2584\u2584\u2584\u2584\u2588\n** \u2588\u2588\u2500\u2584\u2584\u2584\u2588\u2588\u2500\u2580\u2500\u2588\u2588\u2588\u2500\u2588\u2588\u2588\u2500\u2588\u2584\u2580\u2500\u2588\u2588\u2588\u2588\u2500\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584\u2584\u2584\u2584\u2500\u2588\u2500\u2584\u2500\u2588\u2588\u2500\u2580\u2500\u2588\u2588\u2588\u2500\u2584\u2584\u2584\u2588\u2588\u2500\u2584\u2588\u2580\u2588\u2584\u2584\u2584\u2584\u2500\u2588\n** \u2580\u2584\u2584\u2584\u2580\u2580\u2580\u2584\u2584\u2580\u2584\u2584\u2580\u2584\u2584\u2584\u2580\u2584\u2584\u2584\u2580\u2580\u2584\u2584\u2580\u2580\u2584\u2584\u2584\u2580\u2580\u2580\u2580\u2580\u2580\u2580\u2580\u2580\u2584\u2584\u2584\u2584\u2584\u2580\u2584\u2580\u2584\u2580\u2584\u2584\u2580\u2584\u2584\u2580\u2584\u2584\u2584\u2580\u2580\u2580\u2584\u2584\u2584\u2584\u2584\u2580\u2584\u2584\u2584\u2584\u2584\u2580\n*/\n\nimport { Point } from \"../common/Point\";\nimport { Rectangle } from \"./Rectangle\";\n\nexport class Square extends Rectangle {\n\n  private _side: number = 0;\n\n  constructor(topLeft: Point, side: number) {\n    if (side <= 0) {\n      throw new Error('Side length must be > 0.');\n    }\n    super(topLeft, side, side);\n    this._side = side;\n  }\n\n  get topLeft(): Point {\n    return this._points[0];\n  }\n\n  set topLeft(value: Point) {\n    this._points[0] = value;\n  }\n\n  get side(): number {\n    return this._side;\n  }\n\n  set side(value: number) {\n    this._side = value;\n  }\n\n  contains(point: Point): boolean {\n    const topLeft = this._points[0];\n    return point.x >= topLeft.x && (topLeft.x + this._side) >= point.x &&\n      point.y >= topLeft.y && (topLeft.y + this._side) >= point.y;\n  }\n\n  getConnectablePoints(): Point[] {\n    const ret = new Array<Point>();\n    const topLeft = this._points[0];\n    ret.push(new Point(topLeft.x + this._side / 2, topLeft.y));\n    ret.push(new Point(topLeft.x + this._side, topLeft.y + this._side / 2));\n    ret.push(new Point(topLeft.x + this._side / 2, topLeft.y + this._side));\n    ret.push(new Point(topLeft.x, topLeft.y + this._side / 2));\n    return ret;\n  }\n}", "/*\n** \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\n** \u2588\u2584\u2500\u2584\u2584\u2500\u2588\u2588\u2580\u2584\u2500\u2588\u2588\u2584\u2500\u2584\u2588\u2584\u2500\u2580\u2588\u2584\u2500\u2584\u2588\u2500\u2584\u2500\u2584\u2500\u2588\u2580\u2580\u2580\u2580\u2580\u2588\u2588\u2500\u2584\u2584\u2584\u2584\u2588\u2500\u2588\u2500\u2588\u2588\u2580\u2584\u2500\u2588\u2588\u2584\u2500\u2584\u2584\u2500\u2588\u2584\u2500\u2584\u2584\u2500\u2588\u2500\u2584\u2584\u2584\u2584\u2588\n** \u2588\u2588\u2500\u2584\u2584\u2584\u2588\u2588\u2500\u2580\u2500\u2588\u2588\u2588\u2500\u2588\u2588\u2588\u2500\u2588\u2584\u2580\u2500\u2588\u2588\u2588\u2588\u2500\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584\u2584\u2584\u2584\u2500\u2588\u2500\u2584\u2500\u2588\u2588\u2500\u2580\u2500\u2588\u2588\u2588\u2500\u2584\u2584\u2584\u2588\u2588\u2500\u2584\u2588\u2580\u2588\u2584\u2584\u2584\u2584\u2500\u2588\n** \u2580\u2584\u2584\u2584\u2580\u2580\u2580\u2584\u2584\u2580\u2584\u2584\u2580\u2584\u2584\u2584\u2580\u2584\u2584\u2584\u2580\u2580\u2584\u2584\u2580\u2580\u2584\u2584\u2584\u2580\u2580\u2580\u2580\u2580\u2580\u2580\u2580\u2580\u2584\u2584\u2584\u2584\u2584\u2580\u2584\u2580\u2584\u2580\u2584\u2584\u2580\u2584\u2584\u2580\u2584\u2584\u2584\u2580\u2580\u2580\u2584\u2584\u2584\u2584\u2584\u2580\u2584\u2584\u2584\u2584\u2584\u2580\n*/\nimport {Point} from \"@/common/Point\";\nimport {Shape} from \"./Shape\";\n\n/**\n * A simple, immutable Circle.\n *\n * @example\n * const c = new Circle(5);\n * console.log(c.area);            // 78.53981633974483\n * console.log(c.circumference);   // 31.41592653589793\n * console.log(c.toString());      // Circle(radius: 5)\n *\n * // Create from diameter\n * const d = Circle.fromDiameter(10);\n * console.log(d.radius);          // 5\n */\nexport class Circle extends Shape {\n\n  private _radius: number = 0;\n\n  private _center: Point;\n\n  constructor(center: Point, radius: number) {\n    const pts = [center];\n    super(pts);\n\n    if (radius < 0) {\n      throw new RangeError('Radius must be \u2265 0');\n    }\n    this._radius = radius;\n    this._center = center;\n  }\n\n  get radius(): number {\n    return this._radius;\n  }\n\n  set radius(value: number) {\n    this._radius = value;\n  }\n\n  get center(): Point {\n    return this._center;\n  }\n\n  set center(point: Point) {\n    this._center = point;\n    this._points[0] = this._center;\n  }\n\n  get area(): number {\n    return Math.PI * this._radius * this._radius;\n  }\n\n  // offset(point: Point): Point {\n  //   const topLeft = new Point(this._center.x - this._radius, this._center.y - this._radius);\n  //   return new Point(point.x - topLeft.x, point.y - topLeft.y);\n  // }\n\n  place(point: Point): void {\n    this.center = point;\n  }\n\n  contains(point: Point): boolean {\n    const dx = point.x - this._center.x;\n    const dy = point.y - this._center.y;\n    return dx * dx + dy * dy <= this._radius * this._radius;\n  }\n\n  getConnectablePoints(): Point[] {\n    const ret = new Array<Point>();\n    ret.push(new Point(this._center.x, this._center.y - this._radius));\n    ret.push(new Point(this._center.x + this._radius, this._center.y));\n    ret.push(new Point(this._center.x, this._center.y + this._radius));\n    ret.push(new Point(this._center.x - this._radius, this._center.y));\n    return ret;\n  }\n}\n", "/*\n** \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\n** \u2588\u2584\u2500\u2584\u2584\u2500\u2588\u2588\u2580\u2584\u2500\u2588\u2588\u2584\u2500\u2584\u2588\u2584\u2500\u2580\u2588\u2584\u2500\u2584\u2588\u2500\u2584\u2500\u2584\u2500\u2588\u2580\u2580\u2580\u2580\u2580\u2588\u2588\u2500\u2584\u2584\u2584\u2584\u2588\u2500\u2588\u2500\u2588\u2588\u2580\u2584\u2500\u2588\u2588\u2584\u2500\u2584\u2584\u2500\u2588\u2584\u2500\u2584\u2584\u2500\u2588\u2500\u2584\u2584\u2584\u2584\u2588\n** \u2588\u2588\u2500\u2584\u2584\u2584\u2588\u2588\u2500\u2580\u2500\u2588\u2588\u2588\u2500\u2588\u2588\u2588\u2500\u2588\u2584\u2580\u2500\u2588\u2588\u2588\u2588\u2500\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584\u2584\u2584\u2584\u2500\u2588\u2500\u2584\u2500\u2588\u2588\u2500\u2580\u2500\u2588\u2588\u2588\u2500\u2584\u2584\u2584\u2588\u2588\u2500\u2584\u2588\u2580\u2588\u2584\u2584\u2584\u2584\u2500\u2588\n** \u2580\u2584\u2584\u2584\u2580\u2580\u2580\u2584\u2584\u2580\u2584\u2584\u2580\u2584\u2584\u2584\u2580\u2584\u2584\u2584\u2580\u2580\u2584\u2584\u2580\u2580\u2584\u2584\u2584\u2580\u2580\u2580\u2580\u2580\u2580\u2580\u2580\u2580\u2584\u2584\u2584\u2584\u2584\u2580\u2584\u2580\u2584\u2580\u2584\u2584\u2580\u2584\u2584\u2580\u2584\u2584\u2584\u2580\u2580\u2580\u2584\u2584\u2584\u2584\u2584\u2580\u2584\u2584\u2584\u2584\u2584\u2580\n*/\n\nimport {Shape} from \"./Shape\";\nimport {Point} from \"@/common/Point\";\n\n/**\n * A small, pure TypeScript class that builds a diamond shape.\n *\n * Usage:\n *   const d = new Diamond().size(5).char('*').fill(' ');\n *   console.log(d.toString());\n *\n *   // or\n *   const d = Diamond.fromSize(7, 'O', '-').toString();\n */\nexport class Diamond extends Shape {\n\n  private _center: Point;\n\n  private _width: number;\n\n  private _height: number;\n\n  constructor(center: Point, width: number, height: number) {\n\n    const pts: Point[] = [center];\n    super(pts);\n\n    this._center = center;\n    this._width = width;\n    this._height = height;\n  }\n\n  public get center(): Point {\n    return this._center;\n  }\n\n  public get width(): number {\n    return this._width;\n  }\n\n  public get height(): number {\n    return this._height;\n  }\n\n  place(point: Point): void {\n    this._center = point;\n    this._points[0] = point;\n  }\n\n  offset(point: Point): Point {\n    return new Point(point.x - this._center.x, point.y - this._center.y);\n  }\n\n  contains(point: Point): boolean {\n    let result = this.containsForRightAngleTriangle(point,\n      new Point(this._center.x - this._width / 2, this._center.y),\n      new Point(this._center.x, this._center.y - this._height / 2));\n    if (result) {\n      return result;\n    }\n    result = this.containsForRightAngleTriangle(point,\n      new Point(this._center.x + this._width / 2, this._center.y),\n      new Point(this._center.x, this._center.y - this._height / 2));\n    if (result) {\n      return result;\n    }\n    result = this.containsForRightAngleTriangle(point,\n      new Point(this._center.x - this._width / 2, this._center.y),\n      new Point(this._center.x, this._center.y + this._height / 2));\n    if (result) {\n      return result;\n    }\n    result = this.containsForRightAngleTriangle(point,\n      new Point(this._center.x + this._width / 2, this._center.y),\n      new Point(this._center.x, this._center.y + this._height / 2));\n    if (result) {\n      return result;\n    }\n    return false;\n  }\n\n  containsForRightAngleTriangle(point: Point, horizontal: Point, vertical: Point): boolean {\n    const v0 = { x: horizontal.x - this._center.x, y: horizontal.y - this._center.y }; // horizontal leg\n    const v1 = { x: vertical.x - this._center.x, y: vertical.y - this._center.y }; // vertical leg\n    const v2 = { x: point.x - this._center.x, y: point.y - this._center.y }; // vector to the point\n\n    const dot00 = v0.x * v0.x + v0.y * v0.y;            // |v0|\u00B2\n    const dot01 = v0.x * v1.x + v0.y * v1.y;            // v0 \u00B7 v1\n    const dot02 = v0.x * v2.x + v0.y * v2.y;            // v0 \u00B7 v2\n    const dot11 = v1.x * v1.x + v1.y * v1.y;            // |v1|\u00B2\n    const dot12 = v1.x * v2.x + v1.y * v2.y;            // v1 \u00B7 v2\n\n    const denom = dot00 * dot11 - dot01 * dot01;\n    if (denom === 0) return false; // degenerate triangle\n\n    const invDenom = 1 / denom;\n    const u = (dot11 * dot02 - dot01 * dot12) * invDenom;\n    const v = (dot00 * dot12 - dot01 * dot02) * invDenom;\n\n    return u >= 0 && v >= 0 && u + v <= 1;\n  }\n\n  getConnectablePoints(): Point[] {\n    const ret = new Array<Point>();\n    const center = this._points[0];\n    ret.push(new Point(center.x, center.y - this._height / 2));\n    ret.push(new Point(center.x + this._width / 2, center.y));\n    ret.push(new Point(center.x, center.y + this._height / 2));\n    ret.push(new Point(center.x - this._width / 2, center.y));\n    return ret;\n  }\n}\n", "/*\n** \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\n** \u2588\u2584\u2500\u2584\u2584\u2500\u2588\u2588\u2580\u2584\u2500\u2588\u2588\u2584\u2500\u2584\u2588\u2584\u2500\u2580\u2588\u2584\u2500\u2584\u2588\u2500\u2584\u2500\u2584\u2500\u2588\u2580\u2580\u2580\u2580\u2580\u2588\u2588\u2500\u2584\u2584\u2584\u2584\u2588\u2500\u2588\u2500\u2588\u2588\u2580\u2584\u2500\u2588\u2588\u2584\u2500\u2584\u2584\u2500\u2588\u2584\u2500\u2584\u2584\u2500\u2588\u2500\u2584\u2584\u2584\u2584\u2588\n** \u2588\u2588\u2500\u2584\u2584\u2584\u2588\u2588\u2500\u2580\u2500\u2588\u2588\u2588\u2500\u2588\u2588\u2588\u2500\u2588\u2584\u2580\u2500\u2588\u2588\u2588\u2588\u2500\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584\u2584\u2584\u2584\u2500\u2588\u2500\u2584\u2500\u2588\u2588\u2500\u2580\u2500\u2588\u2588\u2588\u2500\u2584\u2584\u2584\u2588\u2588\u2500\u2584\u2588\u2580\u2588\u2584\u2584\u2584\u2584\u2500\u2588\n** \u2580\u2584\u2584\u2584\u2580\u2580\u2580\u2584\u2584\u2580\u2584\u2584\u2580\u2584\u2584\u2584\u2580\u2584\u2584\u2584\u2580\u2580\u2584\u2584\u2580\u2580\u2584\u2584\u2584\u2580\u2580\u2580\u2580\u2580\u2580\u2580\u2580\u2580\u2584\u2584\u2584\u2584\u2584\u2580\u2584\u2580\u2584\u2580\u2584\u2584\u2580\u2584\u2584\u2580\u2584\u2584\u2584\u2580\u2580\u2580\u2584\u2584\u2584\u2584\u2584\u2580\u2584\u2584\u2584\u2584\u2584\u2580\n*/\n\nimport {Shape} from \"@/shape/Shape\";\nimport {ShapeRenderer} from \"@/renderer/ShapeRenderer\";\nimport {Point} from \"@/common/Point\";\nimport {SquareRenderer} from \"@/renderer/SquareRenderer\";\n\nexport class Connection {\n\n  public static LINE_WIDTH: number = 2;\n\n  private readonly _source: Shape;\n\n  private readonly _target: Shape;\n\n  private _label: string = '';\n\n  private _color: string = 'black';\n\n  constructor(source: Shape, target: Shape) {\n    this._source = source;\n    this._target = target;\n  }\n\n  get source(): Shape {\n    return this._source;\n  }\n\n  get target(): Shape {\n    return this._target;\n  }\n\n  get label() {\n    return this._label;\n  }\n\n  set label(label: string) {\n    this._label = label;\n  }\n\n  get color() {\n    return this._color;\n  }\n\n  set color(color: string) {\n    this._color = color;\n  }\n\n  render(ctx: CanvasRenderingContext2D): void {\n    let srcPts: Point[] = this._source.getConnectablePoints();\n    let tgtPts: Point[] = this._target.getConnectablePoints();\n    let srcIdx: number = -1;\n    let tgtIdx: number = -1;\n    let min = Infinity;\n    let pair: Point[] = [new Point(0, 0), new Point(0, 0)];\n    for (let i = 0; i < srcPts.length; i++) {\n      for (let j = 0; j < tgtPts.length; j++) {\n        let dist = srcPts[i].distanceTo(tgtPts[j]);\n        if (dist < min) {\n          pair[0] = srcPts[i];\n          pair[1] = tgtPts[j];\n          srcIdx = i;\n          tgtIdx = j;\n          min = dist;\n        }\n      }\n    }\n    //\n    const size = 10;\n    let angle: number = 90;\n    let offsetX: number = 0;\n    let offsetY: number = 0;\n    for (let i = 0; i < tgtPts.length; i++) {\n      if (tgtPts[i].equals(pair[1])) {\n        if (i == 0) {\n          angle = 180;\n          offsetY = -size;\n        } else if (i == 1) {\n          angle = 270;\n          offsetX = size;\n        } else if (i == 2) {\n          angle = 0;\n          offsetY = size;\n        } else if (i == 3) {\n          angle = 90;\n          offsetX = -size;\n        }\n        break;\n      }\n    }\n    if (min !== Infinity) {\n      ctx.lineWidth = Connection.LINE_WIDTH;\n      ctx.strokeStyle = this._color;\n\n      // z\u6CE8\u610F\u6B64\u5904\u7684\u6280\u5DE7\n      ctx.beginPath();\n      if ((srcIdx % 2) == (tgtIdx % 2)) {\n        const middle = new Point((pair[0].x + pair[1].x) / 2, (pair[0].y + pair[1].y) / 2);\n        if (srcIdx % 2 == 0) {\n          ctx.moveTo(pair[0].x, pair[0].y);\n          ctx.lineTo(pair[0].x, middle.y);\n          ctx.lineTo(pair[1].x + offsetX, middle.y);\n          ctx.lineTo(pair[1].x + offsetX, pair[1].y + offsetY);\n        } else {\n          ctx.moveTo(pair[0].x, pair[0].y);\n          ctx.lineTo(middle.x, pair[0].y);\n          ctx.lineTo(middle.x, pair[1].y + offsetY);\n          ctx.lineTo(pair[1].x + offsetX, pair[1].y + offsetY);\n        }\n      } else if (srcIdx % 2 == 0 && tgtIdx % 2 == 1) {\n        const corner = new Point(pair[0].x, pair[1].y);\n        ctx.moveTo(pair[0].x, pair[0].y);\n        ctx.lineTo(corner.x, corner.y + offsetY);\n        ctx.lineTo(pair[1].x + offsetX, pair[1].y + offsetY);\n      } else if (srcIdx % 2 == 1 && tgtIdx % 2 == 0) {\n        const corner = new Point(pair[1].x, pair[0].y - offsetY);\n        ctx.moveTo(pair[0].x, pair[0].y);\n        ctx.lineTo(corner.x, corner.y + offsetY);\n        ctx.lineTo(pair[1].x + offsetX, pair[1].y + offsetY);\n      }\n      ctx.stroke();\n      ctx.closePath();\n    }\n    this.renderArrowHead(ctx, pair[1].x, pair[1].y, angle, size);\n  }\n\n  renderArrowHead(ctx: CanvasRenderingContext2D, x: number, y: number, angle: number, size = 15) {\n    ctx.fillStyle = '#2c3e50';\n    const offset = Connection.LINE_WIDTH / 2;\n    ctx.beginPath();\n    if (angle == 0) {\n      // top\n      x += offset;\n      ctx.moveTo(x, y);\n      ctx.lineTo(x - size / 2, y + size);\n      ctx.lineTo(x + size / 2, y + size);\n      ctx.moveTo(x, y);\n    } else if (angle == 90) {\n      // right\n      y += offset;\n      ctx.moveTo(x, y);\n      ctx.lineTo(x - size, y - size / 2);\n      ctx.lineTo(x - size, y + size / 2);\n      ctx.moveTo(x, y);\n    } else if (angle == 180) {\n      // bottom\n      x += offset;\n      ctx.moveTo(x, y);\n      ctx.lineTo(x - size / 2, y - size);\n      ctx.lineTo(x + size / 2, y - size);\n      ctx.moveTo(x, y);\n    } else if (angle == 270) {\n      // left\n      y += offset;\n      ctx.moveTo(x, y);\n      ctx.lineTo(x + size, y - size / 2);\n      ctx.lineTo(x + size, y + size / 2);\n      ctx.moveTo(x, y);\n    }\n\n    ctx.stroke();\n    ctx.closePath();\n    ctx.fill();\n  }\n\n  renderCornerLine(ctx: CanvasRenderingContext2D, source: Point, target: Point, offsetX: number, offsetY: number): void{\n\n  }\n\n  renderDirectLine(ctx: CanvasRenderingContext2D, source: Point, target: Point, offsetX: number, offsetY: number): void {\n\n  }\n}", "/*\n** \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\n** \u2588\u2584\u2500\u2584\u2584\u2500\u2588\u2588\u2580\u2584\u2500\u2588\u2588\u2584\u2500\u2584\u2588\u2584\u2500\u2580\u2588\u2584\u2500\u2584\u2588\u2500\u2584\u2500\u2584\u2500\u2588\u2580\u2580\u2580\u2580\u2580\u2588\u2588\u2500\u2584\u2584\u2584\u2584\u2588\u2500\u2588\u2500\u2588\u2588\u2580\u2584\u2500\u2588\u2588\u2584\u2500\u2584\u2584\u2500\u2588\u2584\u2500\u2584\u2584\u2500\u2588\u2500\u2584\u2584\u2584\u2584\u2588\n** \u2588\u2588\u2500\u2584\u2584\u2584\u2588\u2588\u2500\u2580\u2500\u2588\u2588\u2588\u2500\u2588\u2588\u2588\u2500\u2588\u2584\u2580\u2500\u2588\u2588\u2588\u2588\u2500\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584\u2584\u2584\u2584\u2500\u2588\u2500\u2584\u2500\u2588\u2588\u2500\u2580\u2500\u2588\u2588\u2588\u2500\u2584\u2584\u2584\u2588\u2588\u2500\u2584\u2588\u2580\u2588\u2584\u2584\u2584\u2584\u2500\u2588\n** \u2580\u2584\u2584\u2584\u2580\u2580\u2580\u2584\u2584\u2580\u2584\u2584\u2580\u2584\u2584\u2584\u2580\u2584\u2584\u2584\u2580\u2580\u2584\u2584\u2580\u2580\u2584\u2584\u2584\u2580\u2580\u2580\u2580\u2580\u2580\u2580\u2580\u2580\u2584\u2584\u2584\u2584\u2584\u2580\u2584\u2580\u2584\u2580\u2584\u2584\u2580\u2584\u2584\u2580\u2584\u2584\u2584\u2580\u2580\u2580\u2584\u2584\u2584\u2584\u2584\u2580\u2584\u2584\u2584\u2584\u2584\u2580\n*/\nimport { Shape } from \"@/shape/Shape\";\nimport {Color} from \"@/common/Color\";\n\nexport abstract class ShapeRenderer {\n\n  /**\n   * Renders a shape in two-dimensional plane.\n   */\n  abstract render(ctx: CanvasRenderingContext2D, shape: Shape): void;\n\n  /**\n   * Draws a rectangle with the same radius on all four corners.\n   * Works in all browsers that support CanvasRenderingContext2D.\n   */\n  static renderRoundedRect(ctx: CanvasRenderingContext2D,\n                           x: number, y: number, width: number, height: number,\n                           borderRadius: number,\n                           borderWidth: number,\n                           borderColor: Color,\n                           backgroundColor: Color) {\n    if (backgroundColor) {\n      ctx.fillStyle = backgroundColor.hex;\n    }\n\n    ctx.strokeStyle = borderColor.hex;\n    ctx.lineWidth = borderWidth;\n\n    ctx.beginPath();\n    ctx.moveTo(x + borderRadius, y);\n    ctx.lineTo(x + width - borderRadius, y);\n    ctx.quadraticCurveTo(x + width, y, x + width, y + borderRadius);\n    ctx.lineTo(x + width, y + height - borderRadius);\n    ctx.quadraticCurveTo(x + width, y + height, x + width - borderRadius, y + height);\n    ctx.lineTo(x + borderRadius, y + height);\n    ctx.quadraticCurveTo(x, y + height, x, y + height - borderRadius);\n    ctx.lineTo(x, y + borderRadius);\n    ctx.quadraticCurveTo(x, y, x + borderRadius, y);\n    ctx.closePath();\n\n    if (backgroundColor) {\n      ctx.fill();\n    }\n    ctx.stroke();\n  }\n}", "/*\n** \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\n** \u2588\u2584\u2500\u2584\u2584\u2500\u2588\u2588\u2580\u2584\u2500\u2588\u2588\u2584\u2500\u2584\u2588\u2584\u2500\u2580\u2588\u2584\u2500\u2584\u2588\u2500\u2584\u2500\u2584\u2500\u2588\u2580\u2580\u2580\u2580\u2580\u2588\u2588\u2500\u2584\u2584\u2584\u2584\u2588\u2500\u2588\u2500\u2588\u2588\u2580\u2584\u2500\u2588\u2588\u2584\u2500\u2584\u2584\u2500\u2588\u2584\u2500\u2584\u2584\u2500\u2588\u2500\u2584\u2584\u2584\u2584\u2588\n** \u2588\u2588\u2500\u2584\u2584\u2584\u2588\u2588\u2500\u2580\u2500\u2588\u2588\u2588\u2500\u2588\u2588\u2588\u2500\u2588\u2584\u2580\u2500\u2588\u2588\u2588\u2588\u2500\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584\u2584\u2584\u2584\u2500\u2588\u2500\u2584\u2500\u2588\u2588\u2500\u2580\u2500\u2588\u2588\u2588\u2500\u2584\u2584\u2584\u2588\u2588\u2500\u2584\u2588\u2580\u2588\u2584\u2584\u2584\u2584\u2500\u2588\n** \u2580\u2584\u2584\u2584\u2580\u2580\u2580\u2584\u2584\u2580\u2584\u2584\u2580\u2584\u2584\u2584\u2580\u2584\u2584\u2584\u2580\u2580\u2584\u2584\u2580\u2580\u2584\u2584\u2584\u2580\u2580\u2580\u2580\u2580\u2580\u2580\u2580\u2580\u2584\u2584\u2584\u2584\u2584\u2580\u2584\u2580\u2584\u2580\u2584\u2584\u2580\u2584\u2584\u2580\u2584\u2584\u2584\u2580\u2580\u2580\u2584\u2584\u2584\u2584\u2584\u2580\u2584\u2584\u2584\u2584\u2584\u2580\n*/\nimport { Shape } from \"@/shape/Shape\";\nimport { Circle } from \"@/shape/Circle\";\nimport { ShapeRenderer } from \"@/renderer/ShapeRenderer\";\n\nexport class CircleRenderer extends ShapeRenderer {\n\n  render(ctx: CanvasRenderingContext2D, shape: Shape): void {\n    const circle = shape as Circle;\n    ctx.beginPath();\n    ctx.arc(circle.center.x, circle.center.y, circle.radius, 0, Math.PI * 2);\n    ctx.closePath();\n\n    if (circle.backgroundColor) {\n      ctx.fillStyle = circle.backgroundColor.hex;\n      ctx.fill();\n    }\n\n    if (circle.borderWidth > 0){\n      ctx.lineWidth   = circle.borderWidth;\n      ctx.strokeStyle = circle.borderColor.hex;\n      ctx.stroke();\n    } else {\n      if (circle.backgroundColor) {\n        ctx.strokeStyle = circle.backgroundColor.hex;\n        ctx.stroke();\n      }\n    }\n\n    if (shape.text != '') {\n      ctx.fillStyle = shape.foregroundColor.hex;\n      const center = circle.center;\n      const metrics = ctx.measureText(shape.text);\n      const width = metrics.width;\n      const height = metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent;\n      ctx.fillText(shape.text,\n        center.x - width / 2,\n        center.y + height / 2);\n    }\n  }\n\n}", "/*\n** \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\n** \u2588\u2584\u2500\u2584\u2584\u2500\u2588\u2588\u2580\u2584\u2500\u2588\u2588\u2584\u2500\u2584\u2588\u2584\u2500\u2580\u2588\u2584\u2500\u2584\u2588\u2500\u2584\u2500\u2584\u2500\u2588\u2580\u2580\u2580\u2580\u2580\u2588\u2588\u2500\u2584\u2584\u2584\u2584\u2588\u2500\u2588\u2500\u2588\u2588\u2580\u2584\u2500\u2588\u2588\u2584\u2500\u2584\u2584\u2500\u2588\u2584\u2500\u2584\u2584\u2500\u2588\u2500\u2584\u2584\u2584\u2584\u2588\n** \u2588\u2588\u2500\u2584\u2584\u2584\u2588\u2588\u2500\u2580\u2500\u2588\u2588\u2588\u2500\u2588\u2588\u2588\u2500\u2588\u2584\u2580\u2500\u2588\u2588\u2588\u2588\u2500\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584\u2584\u2584\u2584\u2500\u2588\u2500\u2584\u2500\u2588\u2588\u2500\u2580\u2500\u2588\u2588\u2588\u2500\u2584\u2584\u2584\u2588\u2588\u2500\u2584\u2588\u2580\u2588\u2584\u2584\u2584\u2584\u2500\u2588\n** \u2580\u2584\u2584\u2584\u2580\u2580\u2580\u2584\u2584\u2580\u2584\u2584\u2580\u2584\u2584\u2584\u2580\u2584\u2584\u2584\u2580\u2580\u2584\u2584\u2580\u2580\u2584\u2584\u2584\u2580\u2580\u2580\u2580\u2580\u2580\u2580\u2580\u2580\u2584\u2584\u2584\u2584\u2584\u2580\u2584\u2580\u2584\u2580\u2584\u2584\u2580\u2584\u2584\u2580\u2584\u2584\u2584\u2580\u2580\u2580\u2584\u2584\u2584\u2584\u2584\u2580\u2584\u2584\u2584\u2584\u2584\u2580\n*/\nimport { ShapeRenderer } from \"@/renderer/ShapeRenderer\";\nimport { Shape } from \"@/shape/Shape\";\nimport {Square} from \"@/shape/Square\";\n\nexport class SquareRenderer extends ShapeRenderer {\n\n  render(ctx: CanvasRenderingContext2D, shape: Shape): void {\n    const square = shape as Square;\n    if (square.borderRadius == 0) {\n      ctx.strokeStyle = square.borderColor.hex;\n      ctx.lineWidth = square.borderWidth;\n\n      if (square.backgroundColor) {\n        ctx.fillStyle = square.backgroundColor.hex;\n        ctx.fillRect(square.topLeft.x, square.topLeft.y, square.side, square.side);\n      }\n      ctx.strokeRect(square.topLeft.x, square.topLeft.y, square.side, square.side);\n    } else {\n      ShapeRenderer.renderRoundedRect(ctx,\n        square.topLeft.x, square.topLeft.y, square.side, square.side,\n        square.borderRadius, square.borderWidth, square.borderColor,\n        square.backgroundColor);\n    }\n\n    if (shape.text != '') {\n      ctx.fillStyle = shape.foregroundColor.hex;\n      const metrics = ctx.measureText(shape.text);\n      const width = metrics.width;\n      const height = metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent;\n      ctx.fillText(shape.text,\n        square.topLeft.x + (square.width - width) / 2,\n        square.topLeft.y + (square.height + height) / 2);\n    }\n  }\n\n}", "/*\n** \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\n** \u2588\u2584\u2500\u2584\u2584\u2500\u2588\u2588\u2580\u2584\u2500\u2588\u2588\u2584\u2500\u2584\u2588\u2584\u2500\u2580\u2588\u2584\u2500\u2584\u2588\u2500\u2584\u2500\u2584\u2500\u2588\u2580\u2580\u2580\u2580\u2580\u2588\u2588\u2500\u2584\u2584\u2584\u2584\u2588\u2500\u2588\u2500\u2588\u2588\u2580\u2584\u2500\u2588\u2588\u2584\u2500\u2584\u2584\u2500\u2588\u2584\u2500\u2584\u2584\u2500\u2588\u2500\u2584\u2584\u2584\u2584\u2588\n** \u2588\u2588\u2500\u2584\u2584\u2584\u2588\u2588\u2500\u2580\u2500\u2588\u2588\u2588\u2500\u2588\u2588\u2588\u2500\u2588\u2584\u2580\u2500\u2588\u2588\u2588\u2588\u2500\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584\u2584\u2584\u2584\u2500\u2588\u2500\u2584\u2500\u2588\u2588\u2500\u2580\u2500\u2588\u2588\u2588\u2500\u2584\u2584\u2584\u2588\u2588\u2500\u2584\u2588\u2580\u2588\u2584\u2584\u2584\u2584\u2500\u2588\n** \u2580\u2584\u2584\u2584\u2580\u2580\u2580\u2584\u2584\u2580\u2584\u2584\u2580\u2584\u2584\u2584\u2580\u2584\u2584\u2584\u2580\u2580\u2584\u2584\u2580\u2580\u2584\u2584\u2584\u2580\u2580\u2580\u2580\u2580\u2580\u2580\u2580\u2580\u2584\u2584\u2584\u2584\u2584\u2580\u2584\u2580\u2584\u2580\u2584\u2584\u2580\u2584\u2584\u2580\u2584\u2584\u2584\u2580\u2580\u2580\u2584\u2584\u2584\u2584\u2584\u2580\u2584\u2584\u2584\u2584\u2584\u2580\n*/\nimport { ShapeRenderer } from \"@/renderer/ShapeRenderer\";\nimport { Shape } from \"@/shape/Shape\";\nimport {Diamond} from \"@/shape/Diamond\";\nimport {Point} from \"@/common/Point\";\n\nexport class DiamondRenderer extends ShapeRenderer {\n\n  render(ctx: CanvasRenderingContext2D, shape: Shape): void {\n    const diamond = shape as Diamond;\n    const top = new Point(diamond.center.x, diamond.center.y - diamond.height / 2);\n    const right = new Point(diamond.center.x + diamond.width / 2, diamond.center.y);\n    const bottom = new Point(diamond.center.x, diamond.center.y + diamond.height / 2);\n    const left = new Point(diamond.center.x - diamond.width / 2, diamond.center.y);\n\n    ctx.strokeStyle = diamond.borderColor.hex;\n    ctx.lineWidth = diamond.borderWidth;\n\n    if (diamond.backgroundColor) {\n      ctx.fillStyle = diamond.backgroundColor.hex;\n    }\n    ctx.beginPath();\n    ctx.moveTo(top.x, top.y);\n    ctx.lineTo(right.x, right.y);\n    ctx.lineTo(bottom.x, bottom.y);\n    ctx.lineTo(left.x, left.y);\n    ctx.lineTo(top.x, top.y);\n    ctx.closePath();\n\n    ctx.fill('nonzero');\n    ctx.stroke();\n\n    if (shape.text != '') {\n      ctx.fillStyle = shape.foregroundColor.hex;\n      const metrics = ctx.measureText(shape.text);\n      const width = metrics.width;\n      const height = metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent;\n      ctx.fillText(shape.text,\n        left.x + (diamond.width - width) / 2,\n        top.y + (diamond.height + height) / 2);\n    }\n  }\n\n}", "/*\n** \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\n** \u2588\u2584\u2500\u2584\u2584\u2500\u2588\u2588\u2580\u2584\u2500\u2588\u2588\u2584\u2500\u2584\u2588\u2584\u2500\u2580\u2588\u2584\u2500\u2584\u2588\u2500\u2584\u2500\u2584\u2500\u2588\u2580\u2580\u2580\u2580\u2580\u2588\u2588\u2500\u2584\u2584\u2584\u2584\u2588\u2500\u2588\u2500\u2588\u2588\u2580\u2584\u2500\u2588\u2588\u2584\u2500\u2584\u2584\u2500\u2588\u2584\u2500\u2584\u2584\u2500\u2588\u2500\u2584\u2584\u2584\u2584\u2588\n** \u2588\u2588\u2500\u2584\u2584\u2584\u2588\u2588\u2500\u2580\u2500\u2588\u2588\u2588\u2500\u2588\u2588\u2588\u2500\u2588\u2584\u2580\u2500\u2588\u2588\u2588\u2588\u2500\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584\u2584\u2584\u2584\u2500\u2588\u2500\u2584\u2500\u2588\u2588\u2500\u2580\u2500\u2588\u2588\u2588\u2500\u2584\u2584\u2584\u2588\u2588\u2500\u2584\u2588\u2580\u2588\u2584\u2584\u2584\u2584\u2500\u2588\n** \u2580\u2584\u2584\u2584\u2580\u2580\u2580\u2584\u2584\u2580\u2584\u2584\u2580\u2584\u2584\u2584\u2580\u2584\u2584\u2584\u2580\u2580\u2584\u2584\u2580\u2580\u2584\u2584\u2584\u2580\u2580\u2580\u2580\u2580\u2580\u2580\u2580\u2580\u2584\u2584\u2584\u2584\u2584\u2580\u2584\u2580\u2584\u2580\u2584\u2584\u2580\u2584\u2584\u2580\u2584\u2584\u2584\u2580\u2580\u2580\u2584\u2584\u2584\u2584\u2584\u2580\u2584\u2584\u2584\u2584\u2584\u2580\n*/\nimport { ShapeRenderer } from \"@/renderer/ShapeRenderer\";\nimport { Shape } from \"@/shape/Shape\";\nimport {Rectangle} from \"@/shape/Rectangle\";\n\nexport class RectangleRenderer extends ShapeRenderer {\n\n  render(ctx: CanvasRenderingContext2D, shape: Shape): void {\n    const rect = shape as Rectangle;\n    if (rect.borderRadius == 0) {\n      ctx.strokeStyle = rect.borderColor.hex;\n      ctx.lineWidth = rect.borderWidth;\n      if (rect.backgroundColor) {\n        ctx.fillStyle = rect.backgroundColor.hex;\n        ctx.fillRect(rect.topLeft.x, rect.topLeft.y, rect.width, rect.height);\n      }\n      ctx.strokeRect(rect.topLeft.x, rect.topLeft.y, rect.width, rect.height);\n    } else {\n      ShapeRenderer.renderRoundedRect(ctx,\n        rect.topLeft.x, rect.topLeft.y, rect.width, rect.height,\n        rect.borderRadius, rect.borderWidth, rect.borderColor,\n        rect.backgroundColor);\n    }\n    if (shape.text != '') {\n      ctx.fillStyle = shape.foregroundColor.hex;\n      const metrics = ctx.measureText(shape.text);\n      const width = metrics.width;\n      const height = metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent;\n      ctx.fillText(shape.text,\n        rect.topLeft.x + (rect.width - width) / 2,\n        rect.topLeft.y + (rect.height + height) / 2);\n    }\n  }\n\n}", "/*\n** \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\n** \u2588\u2584\u2500\u2584\u2584\u2500\u2588\u2588\u2580\u2584\u2500\u2588\u2588\u2584\u2500\u2584\u2588\u2584\u2500\u2580\u2588\u2584\u2500\u2584\u2588\u2500\u2584\u2500\u2584\u2500\u2588\u2580\u2580\u2580\u2580\u2580\u2588\u2588\u2500\u2584\u2584\u2584\u2584\u2588\u2500\u2588\u2500\u2588\u2588\u2580\u2584\u2500\u2588\u2588\u2584\u2500\u2584\u2584\u2500\u2588\u2584\u2500\u2584\u2584\u2500\u2588\u2500\u2584\u2584\u2584\u2584\u2588\n** \u2588\u2588\u2500\u2584\u2584\u2584\u2588\u2588\u2500\u2580\u2500\u2588\u2588\u2588\u2500\u2588\u2588\u2588\u2500\u2588\u2584\u2580\u2500\u2588\u2588\u2588\u2588\u2500\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584\u2584\u2584\u2584\u2500\u2588\u2500\u2584\u2500\u2588\u2588\u2500\u2580\u2500\u2588\u2588\u2588\u2500\u2584\u2584\u2584\u2588\u2588\u2500\u2584\u2588\u2580\u2588\u2584\u2584\u2584\u2584\u2500\u2588\n** \u2580\u2584\u2584\u2584\u2580\u2580\u2580\u2584\u2584\u2580\u2584\u2584\u2580\u2584\u2584\u2584\u2580\u2584\u2584\u2584\u2580\u2580\u2584\u2584\u2580\u2580\u2584\u2584\u2584\u2580\u2580\u2580\u2580\u2580\u2580\u2580\u2580\u2580\u2584\u2584\u2584\u2584\u2584\u2580\u2584\u2580\u2584\u2580\u2584\u2584\u2580\u2584\u2584\u2580\u2584\u2584\u2584\u2580\u2580\u2580\u2584\u2584\u2584\u2584\u2584\u2580\u2584\u2584\u2584\u2584\u2584\u2580\n*/\nimport {Shape} from \"@/shape/Shape\";\nimport {Circle} from \"@/shape/Circle\";\nimport {Square} from \"@/shape/Square\";\nimport {Diamond} from \"@/shape/Diamond\";\nimport {Rectangle} from \"@/shape/Rectangle\";\nimport {Connection} from \"@/shape/Connection\";\nimport {Point} from \"@/common/Point\";\nimport {Color} from \"@/common/Color\";\n\nimport {CircleRenderer} from \"@/renderer/CircleRenderer\";\nimport {SquareRenderer} from \"@/renderer/SquareRenderer\";\nimport {DiamondRenderer} from \"@/renderer/DiamondRenderer\";\nimport {RectangleRenderer} from \"@/renderer/RectangleRenderer\";\n\n\nexport class FlatPlayground {\n\n  public static CIRCLE_RENDERER: CircleRenderer = new CircleRenderer();\n\n  public static SQUARE_RENDERER: SquareRenderer = new SquareRenderer();\n\n  public static RECTANGLE_RENDERER: RectangleRenderer = new RectangleRenderer();\n\n  public static DIAMOND_RENDERER: DiamondRenderer = new DiamondRenderer();\n\n  private _width: number = 0;\n\n  private _height: number = 0;\n\n  private _shapes: Shape[] = [];\n\n  private _connections: Connection[] = [];\n\n  private readonly _ctx: CanvasRenderingContext2D;\n\n  constructor(ctx: CanvasRenderingContext2D, width: number, height: number) {\n    this._ctx = ctx;\n    this._width = width;\n    this._height = height;\n  }\n\n  render(): void {\n    this._ctx.clearRect(0, 0, this._width, this._height);\n    this.drawBackground();\n    const shapes = this._shapes.sort((a, b) => a.depth - a.depth);\n    for (let i = 0; i < shapes.length; i++) {\n      const shape = shapes[i];\n      if (shape instanceof Circle) {\n        FlatPlayground.CIRCLE_RENDERER.render(this._ctx, shape);\n      } else if (shape instanceof Square) {\n        FlatPlayground.SQUARE_RENDERER.render(this._ctx, shape);\n      } else if (shape instanceof Rectangle) {\n        FlatPlayground.RECTANGLE_RENDERER.render(this._ctx, shape);\n      }else if (shape instanceof Diamond) {\n        FlatPlayground.DIAMOND_RENDERER.render(this._ctx, shape);\n      }\n    }\n\n    for (let i = 0; i < this._connections.length; i++) {\n      this._connections[i].render(this._ctx);\n    }\n  }\n\n  select(x: number, y: number): Shape {\n    let retVal:Shape | null = null;\n    const p: Point = new Point(x, y);\n    for (let i = 0; i < this._shapes.length; i++) {\n      this._shapes[i].borderWidth = 0;\n      this._shapes[i].borderColor = Color.transparent;\n    }\n    for (let i = 0; i < this._shapes.length; i++) {\n      if (this._shapes[i].contains(p)) {\n        this._shapes[i].borderWidth = 2;\n        this._shapes[i].borderColor = new Color(122, 36, 188);\n        retVal = this._shapes[i];\n      }\n    }\n    this.render();\n    return <Shape>retVal;\n  }\n\n  addShape(shape: Shape): void {\n    this._shapes.push(shape);\n    this.render();\n  }\n\n  shiftShape(shape: Shape, mousepos: Point, offset: Point): void {\n    shape.place(new Point(mousepos.x - offset.x, mousepos.y - offset.y));\n    this.render();\n  }\n\n  drawBackground({\n    dotRadius = 1,\n    spacing = 20,\n    dotColor = '#999',\n    background = '#fff'\n  } = {}) {\n    const ctx = this._ctx;\n    ctx.fillStyle = background;\n    ctx.fillRect(0, 0, this._width, this._height);\n\n    // Compute how many columns/rows we need\n    const cols = Math.ceil(this._width / spacing);\n    const rows = Math.ceil(this._height / spacing);\n\n    ctx.fillStyle = dotColor;\n    for (let y = 0; y < rows; ++y) {\n      for (let x = 0; x < cols; ++x) {\n        const cx = x * spacing + spacing / 2;\n        const cy = y * spacing + spacing / 2;\n        ctx.beginPath();\n        ctx.arc(cx, cy, dotRadius, 0, Math.PI * 2);\n        ctx.fill();\n      }\n    }\n  }\n\n  drawArrowHead(x: number, y: number, angle: number, size = 15) {\n    this._ctx.save();\n    this._ctx.translate(x, y);\n    this._ctx.rotate(angle);\n\n    this._ctx.fillStyle = '#2c3e50';\n    this._ctx.beginPath();\n    this._ctx.moveTo(0, 0);\n    this._ctx.lineTo(-size, -size/2);\n    this._ctx.lineTo(-size, size/2);\n    this._ctx.closePath();\n    this._ctx.fill();\n    this._ctx.restore();\n  }\n\n  drawQuadraticCurveWithArrow(startPoint: Point, endPoint: Point, controlOffset = 100) {\n    const midX = (startPoint.x + endPoint.x) / 2;\n    const midY = (startPoint.y + endPoint.y) / 2;\n\n    // Calculate control point (offset perpendicular to the line)\n    const dx = endPoint.x - startPoint.x;\n    const dy = endPoint.y - startPoint.y;\n    const length = Math.sqrt(dx * dx + dy * dy);\n\n    const controlX = midX - (dy / length) * controlOffset;\n    const controlY = midY + (dx / length) * controlOffset;\n\n    // Draw the curve\n    this._ctx.strokeStyle = '#e74c3c';\n    this._ctx.lineWidth = 3;\n    this._ctx.beginPath();\n    this._ctx.moveTo(startPoint.x, startPoint.y);\n    this._ctx.quadraticCurveTo(controlX, controlY, endPoint.x, endPoint.y);\n    this._ctx.stroke();\n\n    // Calculate arrow direction\n    const t = 0.9; // Position along curve for arrow (90%)\n    const arrowX = (1-t)*(1-t)*startPoint.x + 2*(1-t)*t*controlX + t*t*endPoint.x;\n    const arrowY = (1-t)*(1-t)*startPoint.y + 2*(1-t)*t*controlY + t*t*endPoint.y;\n\n    // Calculate tangent direction\n    const tangentX = 2*(1-t)*(controlX - startPoint.x) + 2*t*(endPoint.x - controlX);\n    const tangentY = 2*(1-t)*(controlY - startPoint.y) + 2*t*(endPoint.y - controlY);\n    const angle = Math.atan2(tangentY, tangentX);\n\n    this.drawArrowHead(arrowX, arrowY, 90);\n  }\n\n  addConnection(startPoint: Point, endPoint: Point, cp1Offset: number = 50, cp2Offset = 50) {\n    // Calculate control points\n    const cp1x = startPoint.x + cp1Offset;\n    const cp1y = startPoint.y - cp1Offset;\n    const cp2x = endPoint.x - cp2Offset;\n    const cp2y = endPoint.y - cp2Offset;\n\n    // Draw the curve\n    this._ctx.strokeStyle = '#9b59b6';\n    this._ctx.lineWidth = 3;\n    this._ctx.beginPath();\n    this._ctx.moveTo(startPoint.x, startPoint.y);\n    this._ctx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, endPoint.x, endPoint.y);\n    this._ctx.stroke();\n\n    // Calculate arrow direction at end of curve\n    const tangentX = 3 * (endPoint.x - cp2x);\n    const tangentY = 3 * (endPoint.y - cp2y);\n    const angle = Math.atan2(tangentY, tangentX);\n\n    this.drawArrowHead(endPoint.x, endPoint.y, 90);\n  }\n\n  connect(source: Shape, target: Shape): void {\n    const conn = new Connection(source, target);\n    for (let cn of this._connections) {\n      // TODO\n    }\n    this._connections.push(conn);\n    this.render();\n  }\n\n  getShapes(): Shape[]   {\n    return this._shapes;\n  }\n\n  getConnections(): Connection[] {\n    return this._connections;\n  }\n}"],
  "mappings": "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",
  "names": ["p"]
}
